version: "3"

tasks:
  help:
    desc: print this help message
    cmds:
      - task --list-all
    silent: true

  run:
    desc: build and run pekka 
    cmds:
      - mkdir -p bin
      - go build -o bin/pekka .
      - ./bin/pekka start

  build:
    desc: build and run pekka 
    cmds:
      - mkdir -p bin
      - go build -o bin/pekka .

  tidy:
    desc: format all .go files, and tidy and vendor module dependencies
    cmds:
      - echo 'Formatting .go files...'
      - go fmt ./...
      - echo 'Tidying module dependencies...'
      - go mod tidy
      - echo 'Verifying dependencies...'
      - go mod verify
